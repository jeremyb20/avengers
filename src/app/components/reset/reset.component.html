<div class="homeBody container-fluid px-4 px-md-4 py-4 mx-auto">
  <div class="row g-0 justify-content-center">
    <div class="card-login mb-3 shadow">
      <div *ngIf="!isUserLogged" class="text-center px-4 pt-2 pb-0">
        <img src="../../../assets/images/slogan-white.png" width="100% auto" alt="logo">
      </div>
      <div class="card-body p-3">
        <form class="form-signin" [formGroup]="resetForm" (ngSubmit)="onSubmit()">
          <div *ngIf="isUserLogged" class="form-group mb-2">
            <label class="mb-0 fw-bold">Clave actual</label>
            <div class="input-group input-wrap-password">
              <input name="password" [type]="showPasswordEmailSent ? 'text' : 'password'" formControlName="password" class="form-control" id="password" [ngClass]="{ 'is-invalid': submitted && f.password.errors }" placeholder="&#9679;&#9679;&#9679;&#9679;&#9679;">
              <div (click)="showPasswordEmailSent = !showPasswordEmailSent" class="icon-view-password px-1">
                <i alt="icon" class="fas" [ngClass]="{'fa-lock-open lock-show' : showPasswordEmailSent, 'fa-lock lock-hide': !showPasswordEmailSent}"></i>
              </div>
              <div *ngIf="submitted && f.password.errors" class="invalid-feedback">
                <div *ngIf="f.password.errors.required">Clave actual es requerida</div>
              </div>
            </div>
          </div>
          <div class="form-group mb-2">
            <label class="mb-0 fw-bold">Nueva Clave</label>
            <div class="input-group input-wrap-password">
              <input name="newPassword" [type]="showNewPassword ? 'text' : 'password'" formControlName="newPassword" class="form-control" id="newPassword" [ngClass]="{ 'is-invalid': submitted && f.newPassword.errors }" placeholder="&#9679;&#9679;&#9679;&#9679;&#9679;">
              <div (click)="showNewPassword = !showNewPassword" class="icon-view-password px-1">
                <i alt="icon" class="fas" [ngClass]="{'fa-lock-open lock-show' : showNewPassword, 'fa-lock lock-hide': !showNewPassword}"></i>
              </div>
              <div *ngIf="submitted && f.newPassword.errors" class="invalid-feedback">
                <div *ngIf="f.newPassword.errors.required">Nueva clave es requerida</div>
                <div *ngIf="f.newPassword.errors.minlength">Clave debe ser al menos 6 digitos</div>
                <div *ngIf="f.newPassword.errors.maxlength">Clave maxima de 20 digitos</div>
                  <div *ngIf="f.newPassword.errors.pattern">Clave debe contener al menos 1 número, 1 mayúscula, 1 minúscula, 1 caracter especial (!@#$%^&*)</div>
              </div>
            </div>
          </div>

          <div class="form-group mb-2">
            <label class="mb-0 fw-bold">Confirmar Clave</label>
            <div class="input-group input-wrap-password">
              <input name="confirmPassword" [type]="showConfirmPassword ? 'text' : 'password'" formControlName="confirmPassword" class="form-control" id="confirmPassword" [ngClass]="{ 'is-invalid': submitted && f.confirmPassword.errors }" placeholder="&#9679;&#9679;&#9679;&#9679;&#9679;">
              <div (click)="showConfirmPassword = !showConfirmPassword" class="icon-view-password px-1">
                <i alt="icon" class="fas" [ngClass]="{'fa-lock-open lock-show' : showConfirmPassword, 'fa-lock lock-hide': !showConfirmPassword}"></i>
              </div>
              <div *ngIf="submitted && f.confirmPassword.errors" class="invalid-feedback">
                <div *ngIf="f.confirmPassword.errors.required">Confirmación de clave es requerida</div>
                <div *ngIf="f.confirmPassword.errors.matching">Las claves deben coincidir</div>

              </div>
            </div>
          </div>

          <div class="form-group my-4">
            <div class="col-12 d-grid gap-2">
              <button type="submit" class="btn btn-block btn-info btn-sm">
                Actualizar Clave
                <div *ngIf="loading" class="ms-3 spinner-border text-light" role="status">
                  <span class="sr-only">Loading...</span>
                </div>
              </button>
            </div>
          </div> 
          <div *ngIf="hideMsg" class="alert alert-warning error-message text-center mt-3" role="alert">
            <strong class="text-center"><i class="fas fa-times-circle mt-1 mr-3"></i> {{ ShowMsg }}</strong>
          </div>

        </form>
      </div>
    </div>
  </div>
</div>